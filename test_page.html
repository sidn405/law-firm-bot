<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Law Firm AI Chatbot - Test Page</title>
    <style>
        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            color: white;
            padding: 60px 20px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        /* Navigation */
        nav {
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
        }
        
        nav a {
            color: #1e40af;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        nav a:hover {
            color: #3b82f6;
        }
        
        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        /* Banner */
        .banner {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 40px;
            border-left: 5px solid #3b82f6;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .banner h2 {
            color: #1e40af;
            margin-bottom: 10px;
        }
        
        .banner p {
            color: #666;
            line-height: 1.8;
        }
        
        /* Grid */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }
        
        .card h3 {
            color: #1e40af;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .card p {
            color: #666;
            line-height: 1.8;
        }
        
        .card ul {
            margin-top: 15px;
            padding-left: 20px;
            color: #666;
        }
        
        .card li {
            margin-bottom: 8px;
        }
        
        /* CTA Section */
        .cta {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            color: white;
            border-radius: 10px;
            padding: 50px;
            text-align: center;
            margin: 40px 0;
        }
        
        .cta h2 {
            font-size: 2em;
            margin-bottom: 20px;
        }
        
        .cta p {
            font-size: 1.2em;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        
        .cta button {
            background: white;
            color: #1e40af;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .cta button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255,255,255,0.3);
        }
        
        /* Footer */
        footer {
            background: #1f2937;
            color: white;
            padding: 40px 20px;
            text-align: center;
            margin-top: 60px;
        }
        
        footer p {
            opacity: 0.8;
        }
        
        /* Test Instructions */
        .test-box {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .test-box h3 {
            color: #92400e;
            margin-bottom: 10px;
        }
        
        .test-box ol {
            margin-left: 20px;
            color: #92400e;
        }
        
        .test-box li {
            margin-bottom: 8px;
        }
        
        .test-box code {
            background: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <h1>‚öñÔ∏è Smith & Associates Law Firm</h1>
        <p>Experienced Legal Representation You Can Trust</p>
    </header>
    
    <!-- Navigation -->
    <nav>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#services">Services</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>
    
    <!-- Main Content -->
    <div class="container">
        <!-- Test Instructions -->
        <div class="test-box">
            <h3>üß™ Testing the AI Chatbot</h3>
            <ol>
                <li>Make sure your backend is running: <code>python main.py</code></li>
                <li>Look for the <strong>purple chat bubble</strong> in the bottom-right corner</li>
                <li>Click it to open the chat widget</li>
                <li>Try these test messages:
                    <ul>
                        <li>"I was in a car accident" - Tests personal injury intake</li>
                        <li>"What services do you offer?" - Tests general questions</li>
                        <li>"I need help with a family law matter" - Tests flow routing</li>
                        <li>"How much do you charge?" - Tests website scraping</li>
                    </ul>
                </li>
                <li>Test file upload by clicking the paperclip icon</li>
                <li>Check your console/terminal for API requests</li>
            </ol>
            <p style="margin-top: 10px;"><strong>Note:</strong> If the chat bubble doesn't appear, check that your API is running on http://localhost:8000</p>
        </div>
        
        <!-- Welcome Banner -->
        <div class="banner">
            <h2>Welcome to Smith & Associates</h2>
            <p>For over 25 years, our firm has provided exceptional legal services to individuals and families throughout the region. Our team of experienced attorneys is dedicated to fighting for your rights and achieving the best possible outcomes for your case.</p>
        </div>
        
        <!-- Services Grid -->
        <h2 style="margin-bottom: 30px; color: #1e40af;">Our Practice Areas</h2>
        <div class="grid">
            <div class="card">
                <h3>üöó Personal Injury</h3>
                <p>If you've been injured due to someone else's negligence, we can help you recover compensation for:</p>
                <ul>
                    <li>Car accidents</li>
                    <li>Slip and fall incidents</li>
                    <li>Medical malpractice</li>
                    <li>Workplace injuries</li>
                    <li>Wrongful death</li>
                </ul>
                <p style="margin-top: 15px;"><strong>Consultation Fee:</strong> Free initial consultation</p>
                <p><strong>Timeline:</strong> Most cases resolve within 6-18 months</p>
            </div>
            
            <div class="card">
                <h3>üë®‚Äçüë©‚Äçüëß Family Law</h3>
                <p>We handle all aspects of family law with compassion and expertise:</p>
                <ul>
                    <li>Divorce proceedings</li>
                    <li>Child custody & support</li>
                    <li>Spousal support</li>
                    <li>Adoption</li>
                    <li>Prenuptial agreements</li>
                </ul>
                <p style="margin-top: 15px;"><strong>Consultation Fee:</strong> $250 (1 hour)</p>
                <p><strong>Retainer:</strong> Starting at $3,500</p>
            </div>
            
            <div class="card">
                <h3>üåç Immigration</h3>
                <p>Helping individuals and families navigate the complex immigration system:</p>
                <ul>
                    <li>Green cards & visas</li>
                    <li>Citizenship applications</li>
                    <li>Deportation defense</li>
                    <li>Asylum cases</li>
                    <li>Family reunification</li>
                </ul>
                <p style="margin-top: 15px;"><strong>Consultation Fee:</strong> $200 (1 hour)</p>
                <p><strong>Timeline:</strong> Varies by case type (3-24 months)</p>
            </div>
            
            <div class="card">
                <h3>‚öñÔ∏è Criminal Defense</h3>
                <p>Aggressive defense for all criminal charges:</p>
                <ul>
                    <li>DUI/DWI</li>
                    <li>Drug offenses</li>
                    <li>Assault & battery</li>
                    <li>White collar crimes</li>
                    <li>Expungement</li>
                </ul>
                <p style="margin-top: 15px;"><strong>Consultation Fee:</strong> Free</p>
                <p><strong>Available 24/7</strong> for arrests</p>
            </div>
            
            <div class="card">
                <h3>üíº Business Law</h3>
                <p>Comprehensive legal services for businesses:</p>
                <ul>
                    <li>Business formation</li>
                    <li>Contract drafting & review</li>
                    <li>Employment disputes</li>
                    <li>Commercial litigation</li>
                    <li>Intellectual property</li>
                </ul>
                <p style="margin-top: 15px;"><strong>Hourly Rate:</strong> $350-$500</p>
                <p><strong>Retainer:</strong> Starting at $5,000</p>
            </div>
            
            <div class="card">
                <h3>üìú Estate Planning</h3>
                <p>Protect your legacy and loved ones:</p>
                <ul>
                    <li>Wills & trusts</li>
                    <li>Power of attorney</li>
                    <li>Healthcare directives</li>
                    <li>Probate administration</li>
                    <li>Estate tax planning</li>
                </ul>
                <p style="margin-top: 15px;"><strong>Simple Will:</strong> $500</p>
                <p><strong>Comprehensive Estate Plan:</strong> $2,500-$5,000</p>
            </div>
        </div>
        
        <!-- About Section -->
        <div class="card" id="about" style="margin-bottom: 30px;">
            <h3>About Our Firm</h3>
            <p>Smith & Associates was founded in 1998 by John Smith, a former prosecutor with a passion for justice. Today, our firm has grown to include 12 experienced attorneys and a dedicated support staff of 20+ professionals.</p>
            <p style="margin-top: 15px;">We pride ourselves on:</p>
            <ul>
                <li><strong>Experience:</strong> Combined 200+ years of legal experience</li>
                <li><strong>Results:</strong> Recovered over $50 million for our clients</li>
                <li><strong>Availability:</strong> 24/7 emergency support for urgent matters</li>
                <li><strong>Communication:</strong> Regular updates and responsive service</li>
                <li><strong>Ethics:</strong> Highest standards of professional conduct</li>
            </ul>
        </div>
        
        <!-- CTA -->
        <div class="cta">
            <h2>Ready to Discuss Your Case?</h2>
            <p>Get a free consultation today. Our AI assistant is available 24/7, or call us at (555) 123-4567</p>
            <button onclick="alert('In production, this would open the chat widget or dial the phone number!')">Get Started Now</button>
        </div>
        
        <!-- Contact Info -->
        <div class="card">
            <h3>üìû Contact Information</h3>
            <p><strong>Phone:</strong> (555) 123-4567</p>
            <p><strong>Email:</strong> info@smithlawfirm.com</p>
            <p><strong>Address:</strong> 123 Main Street, Suite 400, Anytown, ST 12345</p>
            <p><strong>Office Hours:</strong> Monday-Friday 9:00 AM - 5:00 PM</p>
            <p style="margin-top: 15px;"><strong>Emergency Line (24/7):</strong> (555) 999-8888</p>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Smith & Associates Law Firm. All rights reserved.</p>
        <p style="margin-top: 10px;">This is a test page for the AI chatbot system.</p>
    </footer>

    <!-- ============================================
         CHAT WIDGET INTEGRATION
         ============================================ -->
    
    <style>
        /* Chat Widget Styles */
        :root {
            --primary-color: #1e40af;
            --secondary-color: #3b82f6;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --bg-light: #f9fafb;
            --border-color: #e5e7eb;
        }
        
        #lawfirm-chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }
        
        /* Chat Button */
        #lawfirm-chat-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        #lawfirm-chat-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(30, 64, 175, 0.4);
        }
        
        #lawfirm-chat-button svg {
            width: 28px;
            height: 28px;
            fill: white;
        }
        
        /* Chat Window */
        #lawfirm-chat-window {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 400px;
            height: 600px;
            max-height: calc(100vh - 120px);
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            display: none;
            flex-direction: column;
            overflow: hidden;
            animation: slideUp 0.3s ease;
        }
        
        #lawfirm-chat-window.open {
            display: flex;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Header */
        .chat-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .chat-header-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .chat-title {
            font-size: 16px;
            font-weight: 600;
        }
        
        .chat-subtitle {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .chat-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        
        .chat-close:hover {
            opacity: 1;
        }
        
        /* Quick Actions */
        .chat-quick-actions {
            padding: 15px;
            background: var(--bg-light);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            gap: 8px;
            overflow-x: auto;
        }
        
        .quick-action-btn {
            padding: 8px 16px;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
        }
        
        .quick-action-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* Messages */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .chat-message {
            display: flex;
            gap: 10px;
            max-width: 80%;
        }
        
        .chat-message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }
        
        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }
        
        .message-content {
            background: var(--bg-light);
            padding: 12px 16px;
            border-radius: 16px;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .chat-message.user .message-content {
            background: var(--primary-color);
            color: white;
        }
        
        .message-time {
            font-size: 11px;
            color: var(--text-light);
            margin-top: 4px;
        }
        
        /* Typing Indicator */
        .typing-indicator {
            display: none;
            align-items: center;
            gap: 10px;
            padding: 12px 16px;
        }
        
        .typing-indicator.active {
            display: flex;
        }
        
        .typing-dots {
            display: flex;
            gap: 4px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-light);
            animation: bounce 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes bounce {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
        
        /* Input Area */
        .chat-input-area {
            padding: 15px;
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 24px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.2s;
        }
        
        .chat-input:focus {
            border-color: var(--primary-color);
        }
        
        .chat-send-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .chat-send-btn:hover {
            transform: scale(1.1);
            background: var(--secondary-color);
        }
        
        /* Mobile Responsive */
        @media (max-width: 480px) {
            #lawfirm-chat-window {
                width: 100%;
                height: 100%;
                max-height: 100vh;
                bottom: 0;
                right: 0;
                border-radius: 0;
            }
            
            #lawfirm-chatbot-container {
                bottom: 10px;
                right: 10px;
            }
        }
    </style>

    <!-- Chat Container -->
    <div id="lawfirm-chatbot-container">
        <!-- Chat Button -->
        <button id="lawfirm-chat-button" onclick="toggleChat()">
            <svg viewBox="0 0 24 24">
                <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
            </svg>
        </button>
        
        <!-- Chat Window -->
        <div id="lawfirm-chat-window">
            <!-- Header -->
            <div class="chat-header">
                <div class="chat-header-info">
                    <div class="chat-avatar">‚öñÔ∏è</div>
                    <div>
                        <div class="chat-title">Legal Assistant</div>
                        <div class="chat-subtitle">Online ‚Ä¢ Available 24/7</div>
                    </div>
                </div>
                <button class="chat-close" onclick="toggleChat()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            
            <!-- Quick Actions -->
            <div class="chat-quick-actions">
                <button class="quick-action-btn" onclick="quickAction('personal_injury')">Personal Injury</button>
                <button class="quick-action-btn" onclick="quickAction('family_law')">Family Law</button>
                <button class="quick-action-btn" onclick="quickAction('schedule')">Schedule</button>
            </div>
            
            <!-- Messages -->
            <div class="chat-messages" id="chat-messages"></div>
            
            <!-- Typing Indicator -->
            <div class="typing-indicator" id="typing-indicator">
                <div class="message-avatar">ü§ñ</div>
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="chat-input-area">
                <input 
                    type="text" 
                    id="chat-input" 
                    class="chat-input" 
                    placeholder="Type your message..." 
                    onkeypress="handleKeyPress(event)"
                >
                <button class="chat-send-btn" onclick="sendMessage()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="22" y1="2" x2="11" y2="13"/>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // CHAT WIDGET JAVASCRIPT
        // ============================================
        
        const API_URL = 'http://localhost:8000/api';  // Your backend URL
        let sessionId = null;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            sessionId = localStorage.getItem('lawfirm_session_id') || generateSessionId();
            localStorage.setItem('lawfirm_session_id', sessionId);
            
            addMessage('bot', 'Hello! I\'m your AI legal assistant. How can I help you today?');
        });
        
        function generateSessionId() {
            return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }
        
        function toggleChat() {
            const chatWindow = document.getElementById('lawfirm-chat-window');
            chatWindow.classList.toggle('open');
            
            if (chatWindow.classList.contains('open')) {
                document.getElementById('chat-input').focus();
            }
        }
        
        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            input.value = '';
            addMessage('user', message);
            showTyping(true);
            
            try {
                const response = await fetch(`${API_URL}/chat`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: message,
                        session_id: sessionId
                    })
                });
                
                const data = await response.json();
                showTyping(false);
                addMessage('bot', data.response);
                
            } catch (error) {
                console.error('Chat error:', error);
                showTyping(false);
                addMessage('bot', 'I apologize, but I\'m having trouble connecting to the server. Please make sure the backend is running on http://localhost:8000');
            }
        }
        
        function quickAction(action) {
            const messages = {
                'personal_injury': 'I need help with a personal injury case.',
                'family_law': 'I have a family law matter.',
                'schedule': 'I\'d like to schedule a consultation.'
            };
            
            if (messages[action]) {
                document.getElementById('chat-input').value = messages[action];
                sendMessage();
            }
        }
        
        function addMessage(sender, text) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = sender === 'user' ? 'üë§' : 'ü§ñ';
            
            const content = document.createElement('div');
            content.className = 'message-content';
            content.textContent = text;
            
            const time = document.createElement('div');
            time.className = 'message-time';
            time.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            messageDiv.appendChild(avatar);
            const messageBody = document.createElement('div');
            messageBody.appendChild(content);
            messageBody.appendChild(time);
            messageDiv.appendChild(messageBody);
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function showTyping(show) {
            const indicator = document.getElementById('typing-indicator');
            if (show) {
                indicator.classList.add('active');
            } else {
                indicator.classList.remove('active');
            }
        }
        
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
    </script>
</body>
</html>